2020-07-09 21:12:58,972 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:12:58,973 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,974 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:12:58,974 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,975 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:12:58,975 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,976 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:12:58,977 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,977 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:12:58,978 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,978 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:12:58,979 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,979 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:12:58,980 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,981 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:12:58,982 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,982 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:12:58,984 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:12:58,984 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:12:58,984 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:12:58,987 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:12:58,988 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:12:58,996 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:12:58,996 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:12:58,998 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:12:58,999 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:12:58,999 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:13:50,788 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:13:50,789 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:13:50,789 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:13:50,789 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:13:50,789 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:13:50,798 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:13:50,798 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:13:50,809 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:13:50,809 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:13:50,995 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:13:50,996 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:13:50,998 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:50,998 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:13:50,999 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:50,999 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:13:51,000 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,000 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:13:51,001 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,002 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:13:51,002 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,003 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:13:51,003 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,004 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:13:51,004 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,005 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:13:51,005 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,006 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:13:51,007 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,007 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:13:51,008 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,008 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:13:51,009 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,010 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:13:51,010 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,011 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:13:51,011 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,012 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:13:51,012 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,013 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:13:51,014 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,014 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:13:51,015 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,015 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:13:51,016 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,017 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:13:51,017 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,018 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:13:51,018 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,019 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:13:51,020 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:13:51,020 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:13:51,020 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:13:51,023 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:13:51,023 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:13:51,033 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:13:51,034 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:13:51,041 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:13:51,041 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:13:51,042 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:15:08,537 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:15:08,537 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:15:08,538 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:15:08,538 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:15:08,538 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:15:08,548 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:15:08,549 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:15:08,558 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:15:08,558 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:15:08,734 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:15:08,735 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:15:08,735 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,736 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:15:08,737 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,737 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:15:08,738 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,739 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:15:08,744 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,745 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:15:08,746 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,746 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:15:08,748 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,748 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:15:08,749 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,750 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:15:08,751 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,752 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:15:08,753 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,753 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:15:08,754 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,755 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:15:08,756 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,756 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:15:08,757 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,758 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:15:08,758 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,759 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:15:08,759 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,760 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:15:08,760 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,761 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:15:08,762 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,768 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:15:08,770 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,770 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:15:08,771 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,772 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:15:08,773 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,773 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:15:08,774 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:15:08,774 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:15:08,774 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:15:08,777 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:15:08,777 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:15:08,785 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:15:08,786 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:15:08,788 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:15:08,788 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:15:08,788 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:16:41,052 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:16:41,052 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:16:41,052 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:16:41,052 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:16:41,052 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:16:41,060 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:16:41,060 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:16:41,074 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:16:41,075 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:16:41,243 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:16:41,245 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:16:41,246 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,246 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:16:41,248 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,249 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:16:41,250 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,250 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:16:41,251 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,251 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:16:41,252 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,252 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:16:41,253 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,254 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:16:41,254 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,255 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:16:41,256 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,256 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:16:41,257 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,257 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:16:41,258 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,259 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:16:41,260 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,260 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:16:41,261 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,261 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:16:41,262 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,263 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:16:41,273 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,274 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:16:41,275 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,275 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:16:41,276 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,278 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:16:41,278 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,279 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:16:41,280 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,285 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:16:41,286 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,287 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:16:41,288 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:16:41,288 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:16:41,288 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:16:41,292 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:16:41,293 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:16:41,298 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:16:41,298 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:16:41,301 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:16:41,301 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:16:41,302 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:17:18,006 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:17:18,006 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:17:18,006 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:17:18,007 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:17:18,007 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:17:18,014 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:17:18,014 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:17:18,021 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:17:18,021 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:17:18,200 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:17:18,216 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:17:18,217 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,217 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:17:18,218 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,219 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:17:18,219 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,220 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:17:18,221 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,221 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:17:18,222 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,222 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:17:18,223 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,224 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:17:18,224 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,225 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:17:18,229 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,230 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:17:18,231 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,231 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:17:18,232 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,233 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:17:18,234 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,234 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:17:18,235 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,236 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:17:18,237 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,237 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:17:18,238 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,239 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:17:18,239 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,240 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:17:18,241 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,241 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:17:18,242 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,243 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:17:18,259 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,260 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:17:18,261 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,261 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:17:18,262 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:17:18,262 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:17:18,262 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:17:18,265 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:17:18,265 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:17:18,272 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:17:18,272 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:17:18,274 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:17:18,275 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:17:18,275 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:22:43,950 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:22:43,955 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:22:43,956 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:22:43,956 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:22:43,956 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:22:43,963 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:22:43,963 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:22:43,969 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:22:43,970 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:22:44,142 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:22:44,143 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:22:44,144 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,145 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:22:44,153 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,154 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:22:44,154 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,155 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:22:44,156 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,157 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:22:44,157 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,158 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:22:44,158 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,159 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:22:44,160 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,161 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:22:44,162 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,162 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:22:44,163 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,163 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:22:44,164 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,165 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:22:44,165 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,166 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:22:44,166 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,167 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:22:44,168 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,168 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:22:44,169 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,169 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:22:44,170 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,170 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:22:44,171 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,172 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:22:44,172 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,173 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:22:44,173 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,174 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:22:44,174 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,175 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:22:44,176 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:22:44,176 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:22:44,176 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:22:44,179 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:22:44,179 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:22:44,186 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:22:44,186 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:22:44,189 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:22:44,189 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:22:44,189 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:23:42,964 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:23:42,964 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:23:42,964 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:23:42,964 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:23:42,964 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:23:42,975 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:23:42,975 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:23:42,982 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:23:42,982 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:23:43,159 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:23:43,161 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:23:43,169 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,171 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:23:43,172 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,174 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:23:43,175 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,176 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:23:43,177 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,177 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:23:43,178 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,178 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:23:43,179 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,180 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:23:43,180 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,181 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:23:43,182 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,182 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:23:43,183 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,183 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:23:43,184 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,184 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:23:43,185 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,186 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:23:43,186 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,187 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:23:43,188 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,188 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:23:43,189 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,190 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:23:43,191 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,191 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:23:43,192 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,192 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:23:43,193 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,193 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:23:43,194 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,195 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:23:43,195 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,196 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:23:43,196 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:23:43,196 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:23:43,197 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:23:43,199 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:23:43,199 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:23:43,213 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:23:43,214 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:23:43,216 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:23:43,216 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:23:43,217 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:24:44,135 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:24:44,135 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:24:44,136 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:24:44,136 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:24:44,136 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:24:44,142 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:24:44,142 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:24:44,149 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:24:44,149 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:24:44,316 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:24:44,317 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:24:44,318 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,319 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:24:44,320 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,320 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:24:44,321 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,321 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:24:44,322 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,325 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:24:44,326 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,327 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:24:44,328 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,329 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:24:44,330 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,330 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:24:44,331 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,332 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:24:44,332 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,333 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:24:44,334 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,334 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:24:44,335 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,336 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:24:44,337 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,337 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:24:44,338 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,339 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:24:44,343 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,343 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:24:44,344 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,345 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:24:44,345 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,346 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:24:44,346 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,347 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:24:44,348 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,348 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:24:44,349 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,349 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:24:44,350 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:24:44,350 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:24:44,350 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:24:44,353 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:24:44,353 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:24:44,360 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:24:44,360 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:24:44,364 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:24:44,364 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:24:44,364 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:25:26,976 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:25:26,976 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:25:26,976 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:25:26,977 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:25:26,977 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:25:26,984 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:25:26,984 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:25:26,991 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:25:26,991 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:25:27,192 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:25:27,193 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:25:27,194 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,194 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:25:27,195 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,196 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:25:27,196 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,197 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:25:27,198 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,198 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:25:27,199 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,200 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:25:27,201 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,201 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:25:27,202 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,203 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:25:27,203 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,204 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:25:27,205 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,206 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:25:27,207 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,209 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:25:27,210 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,210 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:25:27,211 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,212 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:25:27,213 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,213 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:25:27,214 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,215 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:25:27,216 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,217 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:25:27,218 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,219 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:25:27,220 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,220 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:25:27,221 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,221 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:25:27,222 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,222 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:25:27,223 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:25:27,223 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:25:27,223 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:25:27,226 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:25:27,227 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:25:27,234 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:25:27,235 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:25:27,238 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:25:27,238 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:25:27,238 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:26:33,844 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:26:33,844 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:26:33,844 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:26:33,845 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:26:33,845 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:26:33,852 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:26:33,852 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:26:33,858 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:26:33,859 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
2020-07-09 21:26:34,024 - root.plexdata - DEBUG - 28 rows from plex database returned.
2020-07-09 21:26:34,025 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:26:34,026 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,027 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:26:34,027 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,028 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Biography', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Biography'
    ) LIMIT 1
2020-07-09 21:26:34,029 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,030 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Comedy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Comedy'
    ) LIMIT 1
2020-07-09 21:26:34,030 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,031 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:26:34,032 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,032 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:26:34,033 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,034 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Family', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Family'
    ) LIMIT 1
2020-07-09 21:26:34,034 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,035 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Fantasy', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Fantasy'
    ) LIMIT 1
2020-07-09 21:26:34,036 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,036 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:26:34,037 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,037 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Music', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Music'
    ) LIMIT 1
2020-07-09 21:26:34,038 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,039 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Musical', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Musical'
    ) LIMIT 1
2020-07-09 21:26:34,040 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,040 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Romance', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Romance'
    ) LIMIT 1
2020-07-09 21:26:34,041 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,041 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Thriller', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Thriller'
    ) LIMIT 1
2020-07-09 21:26:34,042 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,043 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'War', 'movies') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'War'
    ) LIMIT 1
2020-07-09 21:26:34,043 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,044 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Action', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Action'
    ) LIMIT 1
2020-07-09 21:26:34,045 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,045 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Adventure', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Adventure'
    ) LIMIT 1
2020-07-09 21:26:34,046 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,046 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Crime', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Crime'
    ) LIMIT 1
2020-07-09 21:26:34,047 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,048 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Drama', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Drama'
    ) LIMIT 1
2020-07-09 21:26:34,048 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,049 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'History', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'History'
    ) LIMIT 1
2020-07-09 21:26:34,050 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,050 - root.plexdata - DEBUG - Query to execute:
	INSERT INTO cat_genre (title, category_alias)
    SELECT * FROM (SELECT 'Mini-Series', 'tv_shows') AS tmp
    WHERE NOT EXISTS (
        SELECT title FROM cat_genre WHERE title = 'Mini-Series'
    ) LIMIT 1
2020-07-09 21:26:34,051 - root.plexdata - DEBUG - No recordset returned by the execute call on stalker database.
2020-07-09 21:26:34,051 - root.plexdata - INFO - Success executing the query to update all 20 TV and Movie genres.
2020-07-09 21:26:34,051 - root.plexdata - DEBUG - Query to execute:
	SELECT 
        media_items.id AS media_id,
        metadata_item_id AS metadata_id,
        CAST(strftime('%s', metadata_items.updated_at) AS INTEGER) AS media_last_update,
        CAST(strftime('%s', media_items.updated_at) AS INTEGER) AS metadata_last_update
    FROM media_items
    INNER JOIN metadata_items
        ON media_items.metadata_item_id = metadata_items.id
    WHERE
        media_items.library_section_id IN (2, 3) 
        AND
        media_id IN (9415, 9557);
2020-07-09 21:26:34,054 - root.plexdata - DEBUG - 2 rows from plex database returned.
2020-07-09 21:26:34,054 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9415, 10533, 1593469440, 1536430128);
2020-07-09 21:26:34,066 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:26:34,066 - root.plexdata - DEBUG - Query to execute:
	REPLACE
        INTO ifc_media(plex_media_id, plex_metadata_item_id,plex_media_last_update,plex_metadata_last_update)
        VALUES(9557, 10585, 1593469428, 1536534315);
2020-07-09 21:26:34,068 - root.plexdata - DEBUG - 1 rows in ifc database affected by the execute call.
2020-07-09 21:26:34,069 - root.plexdata - DEBUG - Query to execute:
	SELECT plex_media_id FROM ifc_media;
2020-07-09 21:26:34,069 - root.plexdata - DEBUG - 3 rows from ifc database returned.
2020-07-09 21:27:45,274 - root.plexdata - DEBUG - Path to this application: /home/ananchev/ifc-plex-stalker
2020-07-09 21:27:45,275 - root.plexdata - DEBUG - Using interface db path: /home/ananchev/ifc-plex-stalker/interface.db
2020-07-09 21:27:45,275 - root.plexdata - DEBUG - Using plex db path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:27:45,275 - root.plexdata - DEBUG - Using plex metadata folder path: /home/ananchev/plex-on-sub/Plug-in Support/Databases/com.plexapp.plugins.library.db
2020-07-09 21:27:45,275 - root.plexdata - DEBUG - Using stalker database stalker_db on 192.168.2.72, connected as stalker user: 
2020-07-09 21:27:45,282 - root.plexdata - INFO - success opening plex database connection
2020-07-09 21:27:45,283 - root.plexdata - INFO - success opening ifc database connection
2020-07-09 21:27:45,289 - root.plexdata - INFO - success opening stalker database connection
2020-07-09 21:27:45,289 - root.plexdata - DEBUG - Query to execute:
	SELECT DISTINCT tags_genre, library_section_id
    FROM metadata_items
    WHERE library_section_id IN (2, 3);
